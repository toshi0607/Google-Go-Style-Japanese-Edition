- [Goスタイル決定事項](#goスタイル決定事項)
  - [概要](#概要)
  - [命名](#命名)
    - [アンダースコア](#アンダースコア)
    - [パッケージ名](#パッケージ名)
    - [レシーバ名](#レシーバ名)
    - [定数名](#定数名)

# Goスタイル決定事項

https://google.github.io/styleguide/go/decisions

注意: このドキュメントは、Googleでの[Goスタイル](https://google.github.io/styleguide/go/index)の概要を説明する一連のドキュメントの一部です。このドキュメントは規範的なものですが、標準的なものではなく、コアスタイル ガイドに従属するものです。詳しくは、概要をご覧ください。

## 概要

このドキュメントには、Goの可読性メンターが行うアドバイスに対する標準的なガイダンス、説明、例を統一して提供することを目的としたスタイル決定事項が含まれています。

このドキュメントは完全なものではなく、時間の経過とともに拡張されていきます。コアスタイルガイドがここで提供するアドバイスと矛盾する場合はスタイルガイドが優先され、それに応じてこのドキュメントが更新される必要があります。

Go スタイル ドキュメントの完全なセットについては、[概要](./README.md#概要)を参照してください。

以下のセクションは、スタイルの決定事項からガイドの別の部分に移動しました。

- ミックスキャップ: [ガイド#ミックスキャップ](./guide.md#ミックスキャップ)を参照
- フォーマット: [ガイド#フォーマット](./guide.md#フォーマット)を参照
- 行の長さ: [ガイド#行の長さ](./guide.md#行の長さ)を参照

## 命名

命名の全般的なガイダンスについては、[コアスタイルガイド](./guide.md#命名)の命名のセクションを参照してください。次のセクションでは、命名の特定の領域についてさらに詳しく説明しています。

### アンダースコア

Goの名前は一般的にアンダースコアを含めてはいけません。この原則には3つの例外があります。

1. 生成されたコードによってのみインポートされるパッケージ名には、アンダースコアを含めることができます。複数単語のパッケージ名の選び方について、詳しくは[パッケージ名](#パッケージ名)をご覧ください。
2. `test.go`ファイル内の`Test`、`Benchmark`、`Example`関数名にはアンダースコアを含めることができます。
3. オペレーティングシステムや`cgo`と相互運用する低レベルのライブラリは、`syscall`で行われているように識別子を再利用することができます。これは、ほとんどのコードベースでは非常にまれなことだと思われます。

### パッケージ名

Goのパッケージ名は短く、小文字のみを使用する必要があります。複数の単語からなるパッケージ名は、すべて小文字で切れ目がないようにしなければなりません。たとえば、[tabwriter](https://pkg.go.dev/text/tabwriter)というパッケージは`tabWriter`、`TabWriter`、`tab_writer`という名前ではいけません。

よく使われるローカル変数名と[重複](#TBD)しそうなパッケージ名は選ばないようにしてください。たとえば、`count`は一般的に使用される変数名なので、`count`よりも`usercount`の方がよいパッケージ名です。

Goのパッケージ名にはアンダースコアは使わないでください。アンダースコアを含むパッケージをインポートする必要がある場合（通常は生成されたコードやサードパーティのコードから）、インポート時にGoコードで使用するのに適した名前に変更する必要があります。

例外として、生成されたコードによってのみインポートされるパッケージ名にはアンダースコアを含めることができます。具体的な例としては、以下のようなものがあります。

- 統合テストなど、外部のテストパッケージに`_test`サフィックスを使用する
- [パッケージレベルのドキュメントのサンプル](https://go.dev/blog/examples)に`_test`サフィックスを使用する

`util`、`utility`、`common`、`helper`などの情報量の少ないパッケージ名は避けてください。[いわゆる「ユーティリティパッケージ」](#TBD)については、こちらをご覧ください。

インポートされたパッケージの名前が変更された場合 (例: `import foopb "path/to/foo_go_proto"`) 、パッケージのローカル名は上記のルールに従わなければなりません。特定のインポートが複数のファイル、特に同じパッケージや近くのパッケージで改名された場合、一貫性を保つために可能な限り同じローカル名を使用する必要があります。

こちらも参照してください: [パッケージ名に関するGoブログ記事](https://go.dev/blog/package-names)

### レシーバ名

[レシーバ](https://golang.org/ref/spec#Method_declarations)変数名は、以下の通りでなければなりません。

- 短い（通常1文字か2文字の長さ）
- 型自体の略称
- その型に対するすべてのレシーバで一貫

| 長い名前 | より良い名前 |
| :---: | :---: |
| `func (tray Tray)` | `func (t Tray)` |
| `func (info *ResearchInfo)` | `func (ri *ResearchInfo)` |
| `func (this *ReportWriter)` | `func (w *ReportWriter)` |
| `func (self *Scanner)` | `func (s *Scanner)` |

### 定数名

定数名は、Goの他の名前と同様に[ミックスキャップ](./guide.md#ミックスキャップ)を使用しなければなりません。（エクスポートされた定数は大文字で始まり、エクスポートされていない定数は小文字で始まります。）これは、他の言語での慣習を破っている場合でも適用されます。定数名はその値の派生物であってはならず、代わりにその値が示すものを説明しなければなりません。

```go
// Good:
const MaxPacketSize = 512

const (
    ExecuteBit = 1 << iota
    WriteBit
    ReadBit
)
```

ミックスキャップでない定数名や、`k`のプレフィックスを持つ定数は使用しないでください。

```go
// Bad:
const MAX_PACKET_SIZE = 512
const kMaxBufferSize = 1024
const KMaxUsersPergroup = 500
```

定数には、値ではなく役割に基づいて名前を付けます。もし定数がその値とは別に役割を持たないのであれば、定数として定義する必要はありません。

```go
// Bad:
const Twelve = 12

const (
    UserNameColumn = "username"
    GroupColumn    = "group"
)
```
